<template>
  <div >
    <Navbar/>
    <SecondNavbar />

    <!-- Main container -->
    <div class="max-w-5xl mx-auto p-6 pt-5 ">

      <!-- üî≤ ‡∏Å‡∏•‡πà‡∏≠‡∏á‡πÉ‡∏´‡∏ç‡πà‡∏Ñ‡∏£‡∏≠‡∏ö‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á -->
      <div class="bg-white border border-gray-300 rounded-xl shadow-sm p-10 space-y-9">


    <h1 class="text-center text-3xl ">
      ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ
    </h1>
    <div class="max-w-4xl mx-auto p-6 pt-8 mt-10">

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-x-20 gap-y-4 ">
          <div class="flex flex-col gap-1.5">
            <span>‡∏Ç‡πâ‡∏≤‡∏û‡πÄ‡∏à‡πâ‡∏≤</span>
            <InputText type="text" />
             <p v-if="errors.name" class="text-red-500 text-sm">* {{ errors.name }}</p>
          </div>

          <div class="flex flex-col gap-1.5">
            <span>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</span>
            <InputText type="phone" />
            <p v-if="errors.phone" class="text-red-500 text-sm">* {{ errors.phone }}</p>

          </div>

          <div class="flex flex-col gap-1.5">
            <span>‡∏™‡∏±‡∏á‡∏Å‡∏±‡∏î</span>
            <Selects
              v-model="category"
              :options="['‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô‡∏ó‡∏µ‡πà 1','‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô‡∏ó‡∏µ‡πà 2','‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô‡∏ó‡∏µ‡πà 3','‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô‡∏ó‡∏µ‡πà 4']"
            />
            <p v-if="errors.department" class="text-red-500 text-sm mt-2">
    * {{ errors.department }}
  </p>

          </div>

          <div class="flex flex-col gap-1.5">
            <span>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</span>
            <InputText type="number" />
             <p v-if="errors.amount" class="text-red-500 text-sm">
    * {{ errors.amount }}</p>

          </div>
        </div>



        <div class="space-y-4 mt-5 ">
          <span class="font-medium text-lg ">‡∏•‡πâ‡∏≤‡∏á‡∏•‡∏π‡∏Å‡∏´‡∏ô‡∏µ‡πâ</span>

          <div class="grid grid-cols-2 lg:grid-cols-4 gap-4">
            <Selects
              v-model="debts"
              :options="['‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô‡∏ó‡∏µ‡πà 1','‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô‡∏ó‡∏µ‡πà 2','‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô‡∏ó‡∏µ‡πà 3','‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô‡∏ó‡∏µ‡πà 4']"
              placeholder="‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£"
            />
            <InputText placeholder="‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á" />
            <p v-if="errors.clearDoc" class="text-red-500 text-sm mt-1">
      * {{ errors.clearDoc }}
    </p>
            <InputText placeholder="‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô" />
            <p v-if="errors.clearMoney" class="text-red-500 text-sm mt-1">
      * {{ errors.clearMoney }}
    </p>
            <InputText placeholder="‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏" />
            <p v-if="errors.clearNote" class="text-red-500 text-sm mt-1">
      * {{ errors.clearNote }}
    </p>
          </div>
        </div>



        <div class="space-y-4 mt-5">
          <div>
            <input type="checkbox" v-model="check3">
            ‡∏ô‡∏≥‡∏ù‡∏≤‡∏Å‡πÄ‡∏Ç‡πâ‡∏≤‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£
          </div>

        </div>



        <div class="flex justify-end gap-3 pt-4">
          <button class="px-4 py-2 rounded-md bg-gray-300 text-gray-700 hover:bg-gray-400" @click="saveData">
            ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
          </button>
          <button
            class="px-6 py-2 rounded-md bg-gray-600 text-white hover:bg-gray-700"
            @click="gotomainpage"
          >
            ‡∏Å‡∏•‡∏±‡∏ö
          </button>
        </div>
       </div>
      </div>

    </div>
  </div>
</template>


<script setup>
import { ref } from 'vue'
import Navbar from '@/components/bar/navbar.vue'
import SecondNavbar from '@/components/bar/secoudnavbar.vue'
import Selects from '@/components/input/select.vue'
import InputText from '@/components/input/inputtext.vue'
import router from '@/router'
import { reactive } from "vue";

const category = ref('')
const debts = ref('')
const check3 = ref(false)

const gotomainpage = () => router.push('/')
const form = reactive({
  name: "",
  phone: "",
  department: "",
  amount: "",
  clearList: {
    type: "",
    doc: "",
    money: "",
    note: "",
  },
  bank1: false,
  bank2: false,
  bank3: false,
});

const errors = reactive({});

const validateForm = () => {
  errors.name = !form.name ? "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠" : "";
  errors.phone = !form.phone ? "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£" : "";
  errors.department = !form.department ? "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏±‡∏á‡∏Å‡∏±‡∏î" : "";
  errors.amount = !form.amount ? "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô" : "";

  errors.clearType = !form.clearList.type ? "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£" : "";
  errors.clearDoc = !form.clearList.doc ? "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£" : "";
  errors.clearMoney = !form.clearList.money ? "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô" : "";
  errors.clearNote = !form.clearList.note ? "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏" : "";

  // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ error ‡πÉ‡∏´‡πâ‡∏Ñ‡∏∑‡∏ô true
  return Object.values(errors).some((e) => e !== "");
};

const saveData = () => {
  const hasError = validateForm();

  if (hasError) {
    alert("‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ä‡πà‡∏≠‡∏á");
    return;
  }

  console.log("‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:", JSON.parse(JSON.stringify(form)));
  alert("‚úî ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
};

</script>
